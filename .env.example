# ===========================================
# Database Configuration
# ===========================================
# Recommended: Use individual components for flexibility
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=CHANGE_ME
DB_NAME=url-shortener

# Alternative: Full URL (auto-generated from components if not set)
# DATABASE_URL=postgres://postgres:CHANGE_ME@localhost:5432/url-shortener

# ===========================================
# Connection Pool
# ===========================================
DB_MAX_CONNECTIONS=10
DB_CONNECT_TIMEOUT=30
DB_IDLE_TIMEOUT=600
DB_MAX_LIFETIME=1800

# ===========================================
# Redis Configuration (optional)
# ===========================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Alternative: Full URL
# REDIS_URL=redis://localhost:6379/0

# ===========================================
# Application Configuration
# ===========================================
LISTEN=0.0.0.0:3000
PORT=3000

# ===========================================
# Logging
# ===========================================
RUST_LOG=info,url_shortener=debug
LOG_FORMAT=text

# ===========================================
# Security
# ===========================================
# HMAC-SHA256 signing key for API token hashing. Required.
# Generate with: openssl rand -hex 32
TOKEN_SIGNING_SECRET=CHANGE_ME

# ===========================================
# Optional Features
# ===========================================
CLICK_QUEUE_CAPACITY=10000

# Maximum number of click events processed concurrently by the background worker (1-256).
CLICK_WORKER_CONCURRENCY=4

# TTL in seconds for cached URL mappings in Redis. Has no effect without Redis.
CACHE_TTL_SECONDS=3600

# Set to true when running behind a reverse proxy (nginx, cloudflare, etc.).
# Rate limiting will use X-Forwarded-For / X-Real-IP instead of peer socket IP.
# Only enable when you trust the proxy to set these headers correctly.
BEHIND_PROXY=false
